<!DOCTYPE html>
<html class="dark" lang="tr">

<head>
    <meta charset="utf-8" />
    <title>Uyumsuzluk Raporu - Academic Eye</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: "#1132d4",
                        background: "#101322",
                        surface: "#1A1D2D"
                    },
                    fontFamily: {
                        display: ["Space Grotesk", "sans-serif"]
                    }
                }
            }
        };
    </script>
</head>

<body class="bg-background font-display text-white min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav
        class="border-b border-white/10 px-8 py-4 flex justify-between items-center bg-black/20 backdrop-blur-md sticky top-0 z-50">
        <a href="{{ url_for('dashboard') }}"
            class="text-xl font-bold flex items-center gap-2 hover:text-primary transition">
            <span class="text-primary">â—†</span> Academic Eye
        </a>
        <div class="flex items-center gap-4">
            <a href="{{ url_for('dashboard') }}"
                class="text-sm text-gray-400 hover:text-white transition flex items-center gap-1">
                <span>â†</span> Panele DÃ¶n
            </a>
        </div>
    </nav>

    <!-- Content -->
    <main class="flex-grow container mx-auto px-6 py-10 max-w-7xl">

        <header class="mb-10 text-center">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-500/10 text-orange-400 text-xs font-bold border border-orange-500/20 mb-4">
                DENETÃ‡Ä° MODU AKTÄ°F
            </div>
            <h1 class="text-4xl font-bold mb-2">Veri Uyumsuzluk Raporu</h1>
            <p class="text-gray-400 max-w-2xl mx-auto">
                AÅŸaÄŸÄ±daki listeler, YÃ–K Akademik ve Scopus profilleriniz arasÄ±ndaki veri eÅŸleÅŸmezliklerini
                gÃ¶sterir.
                Bu verileri inceleyerek eksik yayÄ±nlarÄ±nÄ±zÄ± tamamlayabilirsiniz.
            </p>
        </header>

        {% if grouped_articles or grouped_conferences %}

        <!-- MAKALE EKSÄ°KLERÄ° BÃ–LÃœMÃœ -->
        {% if grouped_articles %}
        <section class="mb-12">
            <div class="flex items-center gap-3 mb-6">
                <span class="text-3xl">ğŸ“„</span>
                <div>
                    <h2 class="text-2xl font-bold text-white">Eksik Makaleler</h2>
                    <p class="text-sm text-gray-500">Scopus'ta var, YÃ–K'te eksik olan makale yayÄ±nlarÄ±</p>
                </div>
                <span
                    class="ml-auto bg-red-500/20 text-red-400 px-4 py-2 rounded-full text-sm font-bold border border-red-500/30">
                    {{ total_articles }} Eksik
                </span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                {% for publisher, pubs in grouped_articles.items() %}
                <!-- Card for {{ publisher }} -->
                {% set color_class = 'gray' %}
                {% set icon = 'ğŸ“š' %}

                {% if 'IEEE' in publisher %}{% set color_class = 'blue' %}{% set icon = 'ğŸ“¡' %}
                {% elif 'Springer' in publisher %}{% set color_class = 'green' %}{% set icon = 'ğŸŒ¿' %}
                {% elif 'Wiley' in publisher %}{% set color_class = 'purple' %}{% set icon = 'ğŸ”¬' %}
                {% elif 'Elsevier' in publisher %}{% set color_class = 'orange' %}{% set icon = 'ğŸ“™' %}
                {% elif 'ACM' in publisher %}{% set color_class = 'sky' %}{% set icon = 'ğŸ’»' %}
                {% endif %}

                <div
                    class="bg-surface/50 border border-white/5 rounded-2xl overflow-hidden flex flex-col hover:border-white/10 transition">
                    <!-- Header -->
                    <div
                        class="p-6 border-b border-white/5 bg-{{ color_class }}-500/5 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">{{ icon }}</span>
                            <div>
                                <h3 class="text-lg font-bold text-gray-200">{{ publisher }}</h3>
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest">YayÄ±ncÄ±</p>
                            </div>
                        </div>
                        <span class="bg-white/5 text-gray-300 text-xs px-3 py-1 rounded-full border border-white/5">
                            {{ pubs|length }} Eksik
                        </span>
                    </div>

                    <!-- List -->
                    <div class="p-4 overflow-y-auto max-h-[400px] custom-scrollbar space-y-3">
                        {% for pub in pubs %}
                        <div
                            class="group bg-black/20 p-4 rounded-xl border border-white/5 hover:border-white/20 transition duration-300 relative">
                            <span
                                class="absolute top-4 right-4 text-[10px] font-mono text-gray-600 group-hover:text-gray-400 opacity-50 group-hover:opacity-100 transition">
                                {{ pub.year }}
                            </span>

                            <h4 class="text-sm text-gray-300 group-hover:text-white transition font-medium pr-8 mb-2">
                                {{ pub.title }}
                            </h4>

                            <div class="flex items-center gap-2 text-[11px] text-gray-500">
                                <span class="bg-white/5 px-1.5 py-0.5 rounded text-gray-400">{{ pub.type|upper if
                                    pub.type
                                    else 'MAKALE' }}</span>
                                <span class="truncate italic max-w-[200px]">{{ pub.venue }}</span>
                            </div>

                            <!-- Hover Action (YÃ–K Ara) -->
                            <a href="https://akademik.yok.gov.tr/AkademikArama/" target="_blank"
                                class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 bg-white/10 hover:bg-white/20 text-white p-1.5 rounded-lg transition"
                                title="YÃ–K'te Manuel Ara">
                                ğŸ”
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- BÄ°LDÄ°RÄ° EKSÄ°KLERÄ° BÃ–LÃœMÃœ -->
        {% if grouped_conferences %}
        <section class="mb-12">
            <div class="flex items-center gap-3 mb-6">
                <span class="text-3xl">ğŸ“¢</span>
                <div>
                    <h2 class="text-2xl font-bold text-white">Eksik Bildiriler</h2>
                    <p class="text-sm text-gray-500">Scopus'ta var, YÃ–K'te eksik olan konferans bildirileri</p>
                </div>
                <span
                    class="ml-auto bg-purple-500/20 text-purple-400 px-4 py-2 rounded-full text-sm font-bold border border-purple-500/30">
                    {{ total_conferences }} Eksik
                </span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                {% for publisher, pubs in grouped_conferences.items() %}
                <!-- Card for {{ publisher }} -->
                {% set color_class = 'gray' %}
                {% set icon = 'ğŸ“š' %}

                {% if 'IEEE' in publisher %}{% set color_class = 'blue' %}{% set icon = 'ğŸ“¡' %}
                {% elif 'Springer' in publisher %}{% set color_class = 'green' %}{% set icon = 'ğŸŒ¿' %}
                {% elif 'Wiley' in publisher %}{% set color_class = 'purple' %}{% set icon = 'ğŸ”¬' %}
                {% elif 'Elsevier' in publisher %}{% set color_class = 'orange' %}{% set icon = 'ğŸ“™' %}
                {% elif 'ACM' in publisher %}{% set color_class = 'sky' %}{% set icon = 'ğŸ’»' %}
                {% endif %}

                <div
                    class="bg-surface/50 border border-white/5 rounded-2xl overflow-hidden flex flex-col hover:border-white/10 transition">
                    <!-- Header -->
                    <div
                        class="p-6 border-b border-white/5 bg-{{ color_class }}-500/5 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">{{ icon }}</span>
                            <div>
                                <h3 class="text-lg font-bold text-gray-200">{{ publisher }}</h3>
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest">YayÄ±ncÄ±</p>
                            </div>
                        </div>
                        <span class="bg-white/5 text-gray-300 text-xs px-3 py-1 rounded-full border border-white/5">
                            {{ pubs|length }} Eksik
                        </span>
                    </div>

                    <!-- List -->
                    <div class="p-4 overflow-y-auto max-h-[400px] custom-scrollbar space-y-3">
                        {% for pub in pubs %}
                        <div
                            class="group bg-black/20 p-4 rounded-xl border border-white/5 hover:border-white/20 transition duration-300 relative">
                            <span
                                class="absolute top-4 right-4 text-[10px] font-mono text-gray-600 group-hover:text-gray-400 opacity-50 group-hover:opacity-100 transition">
                                {{ pub.year }}
                            </span>

                            <h4 class="text-sm text-gray-300 group-hover:text-white transition font-medium pr-8 mb-2">
                                {{ pub.title }}
                            </h4>

                            <div class="flex items-center gap-2 text-[11px] text-gray-500">
                                <span class="bg-white/5 px-1.5 py-0.5 rounded text-gray-400">{{ pub.type|upper if
                                    pub.type
                                    else 'BÄ°LDÄ°RÄ°' }}</span>
                                <span class="truncate italic max-w-[200px]">{{ pub.venue }}</span>
                            </div>

                            <!-- Hover Action (YÃ–K Ara) -->
                            <a href="https://akademik.yok.gov.tr/AkademikArama/" target="_blank"
                                class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 bg-white/10 hover:bg-white/20 text-white p-1.5 rounded-lg transition"
                                title="YÃ–K'te Manuel Ara">
                                ğŸ”
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        {% else %}
        <!-- Empty State -->
        <div class="flex flex-col items-center justify-center py-20 text-center">
            <div class="w-24 h-24 bg-green-500/10 rounded-full flex items-center justify-center mb-6 animate-pulse">
                <span class="text-4xl">âœ…</span>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2">Harika Ä°ÅŸ!</h2>
            <p class="text-gray-400 max-w-md">Scopus profilinizdeki tÃ¼m yayÄ±nlar YÃ–K sisteminde eksiksiz gÃ¶rÃ¼nÃ¼yor.
                <br>Senkronizasyon tam.
            </p>
        </div>
        {% endif %}


    </main>

    <footer class="text-center py-6 text-xs text-gray-600 border-t border-white/5">
        Academic Eye &copy; 2024
    </footer>

    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</body>

</html>